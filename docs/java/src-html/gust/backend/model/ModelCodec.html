<!DOCTYPE HTML>
<html lang="en">
<head>
<title>Source code</title>
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
</head>
<body>
<main role="main">
<div class="sourceContainer">
<pre><span class="sourceLineNo">001</span><a id="line.1">/*</a>
<span class="sourceLineNo">002</span><a id="line.2"> * Copyright Â© 2020, The Gust Framework Authors. All rights reserved.</a>
<span class="sourceLineNo">003</span><a id="line.3"> *</a>
<span class="sourceLineNo">004</span><a id="line.4"> * The Gust/Elide framework and tools, and all associated source or object computer code, except where otherwise noted,</a>
<span class="sourceLineNo">005</span><a id="line.5"> * are licensed under the Zero Prosperity license, which is enclosed in this repository, in the file LICENSE.txt. Use of</a>
<span class="sourceLineNo">006</span><a id="line.6"> * this code in object or source form requires and implies consent and agreement to that license in principle and</a>
<span class="sourceLineNo">007</span><a id="line.7"> * practice. Source or object code not listing this header, or unless specified otherwise, remain the property of</a>
<span class="sourceLineNo">008</span><a id="line.8"> * Elide LLC and its suppliers, if any. The intellectual and technical concepts contained herein are proprietary to</a>
<span class="sourceLineNo">009</span><a id="line.9"> * Elide LLC and its suppliers and may be covered by U.S. and Foreign Patents, or patents in process, and are protected</a>
<span class="sourceLineNo">010</span><a id="line.10"> * by trade secret and copyright law. Dissemination of this information, or reproduction of this material, in any form,</a>
<span class="sourceLineNo">011</span><a id="line.11"> * is strictly forbidden except in adherence with assigned license requirements.</a>
<span class="sourceLineNo">012</span><a id="line.12"> */</a>
<span class="sourceLineNo">013</span><a id="line.13">package gust.backend.model;</a>
<span class="sourceLineNo">014</span><a id="line.14"></a>
<span class="sourceLineNo">015</span><a id="line.15">import com.google.protobuf.Message;</a>
<span class="sourceLineNo">016</span><a id="line.16"></a>
<span class="sourceLineNo">017</span><a id="line.17">import javax.annotation.Nonnull;</a>
<span class="sourceLineNo">018</span><a id="line.18">import java.io.IOException;</a>
<span class="sourceLineNo">019</span><a id="line.19"></a>
<span class="sourceLineNo">020</span><a id="line.20"></a>
<span class="sourceLineNo">021</span><a id="line.21">/**</a>
<span class="sourceLineNo">022</span><a id="line.22"> * Specifies the requisite interface for a data codec implementation. These objects are responsible for performing model</a>
<span class="sourceLineNo">023</span><a id="line.23"> * serialization and deserialization, within different circumstances. For example, models are used with databases via</a>
<span class="sourceLineNo">024</span><a id="line.24"> * adapters that serialize each model into a corresponding database object, or series of database calls.</a>
<span class="sourceLineNo">025</span><a id="line.25"> *</a>
<span class="sourceLineNo">026</span><a id="line.26"> * &lt;p&gt;Adapters are &lt;i&gt;bi-directional&lt;/i&gt;, i.e., they must support transitioning both &lt;i&gt;to&lt;/i&gt; and &lt;i&gt;from&lt;/i&gt; message</a>
<span class="sourceLineNo">027</span><a id="line.27"> * representations, based on circumstance. Services are the only case where this is generally not necessary, because</a>
<span class="sourceLineNo">028</span><a id="line.28"> * gRPC handles serialization automatically.&lt;/p&gt;</a>
<span class="sourceLineNo">029</span><a id="line.29"> *</a>
<span class="sourceLineNo">030</span><a id="line.30"> * @see ModelSerializer Surface definition for a model serializer.</a>
<span class="sourceLineNo">031</span><a id="line.31"> * @see ModelDeserializer Surface definition for a model de-serializer.</a>
<span class="sourceLineNo">032</span><a id="line.32"> * @param &lt;Model&gt; Model type which this codec is responsible for serializing and de-serializing.</a>
<span class="sourceLineNo">033</span><a id="line.33"> * @param &lt;WriteIntermediate&gt; Intermediate record type which this codec converts model instances into.</a>
<span class="sourceLineNo">034</span><a id="line.34"> */</a>
<span class="sourceLineNo">035</span><a id="line.35">@SuppressWarnings("unused")</a>
<span class="sourceLineNo">036</span><a id="line.36">public interface ModelCodec&lt;Model extends Message, WriteIntermediate, ReadIntermediate&gt; {</a>
<span class="sourceLineNo">037</span><a id="line.37">  // -- Components -- //</a>
<span class="sourceLineNo">038</span><a id="line.38">  /**</a>
<span class="sourceLineNo">039</span><a id="line.39">   * Acquire an instance of the {@link ModelSerializer} attached to this adapter. The instance is not guaranteed to be</a>
<span class="sourceLineNo">040</span><a id="line.40">   * created fresh for this invocation.</a>
<span class="sourceLineNo">041</span><a id="line.41">   *</a>
<span class="sourceLineNo">042</span><a id="line.42">   * @see #deserializer() For the inverse of this method.</a>
<span class="sourceLineNo">043</span><a id="line.43">   * @see #deserialize(Object) To call into de-serialization directly.</a>
<span class="sourceLineNo">044</span><a id="line.44">   * @return Serializer instance.</a>
<span class="sourceLineNo">045</span><a id="line.45">   */</a>
<span class="sourceLineNo">046</span><a id="line.46">  @Nonnull ModelSerializer&lt;Model, WriteIntermediate&gt; serializer();</a>
<span class="sourceLineNo">047</span><a id="line.47"></a>
<span class="sourceLineNo">048</span><a id="line.48">  /**</a>
<span class="sourceLineNo">049</span><a id="line.49">   * Acquire an instance of the {@link ModelDeserializer} attached to this adapter. The instance is not guaranteed to be</a>
<span class="sourceLineNo">050</span><a id="line.50">   * created fresh for this invocation.</a>
<span class="sourceLineNo">051</span><a id="line.51">   *</a>
<span class="sourceLineNo">052</span><a id="line.52">   * @see #serializer() For the inverse of this method.</a>
<span class="sourceLineNo">053</span><a id="line.53">   * @see #serialize(Message) To call into serialization directly.</a>
<span class="sourceLineNo">054</span><a id="line.54">   * @return Deserializer instance.</a>
<span class="sourceLineNo">055</span><a id="line.55">   */</a>
<span class="sourceLineNo">056</span><a id="line.56">  @Nonnull ModelDeserializer&lt;ReadIntermediate, Model&gt; deserializer();</a>
<span class="sourceLineNo">057</span><a id="line.57"></a>
<span class="sourceLineNo">058</span><a id="line.58">  /**</a>
<span class="sourceLineNo">059</span><a id="line.59">   * Retrieve the default instance stored with this codec. Each {@link Message} with a paired {@link ModelCodec} retains</a>
<span class="sourceLineNo">060</span><a id="line.60">   * a reference to its corresponding default instance.</a>
<span class="sourceLineNo">061</span><a id="line.61">   *</a>
<span class="sourceLineNo">062</span><a id="line.62">   * @return Default model instance.</a>
<span class="sourceLineNo">063</span><a id="line.63">   */</a>
<span class="sourceLineNo">064</span><a id="line.64">  @Nonnull Model instance();</a>
<span class="sourceLineNo">065</span><a id="line.65"></a>
<span class="sourceLineNo">066</span><a id="line.66">  // -- Proxies -- //</a>
<span class="sourceLineNo">067</span><a id="line.67">  /**</a>
<span class="sourceLineNo">068</span><a id="line.68">   * Sugar shortcut to serialize a model through the current codec's installed {@link ModelSerializer}.</a>
<span class="sourceLineNo">069</span><a id="line.69">   *</a>
<span class="sourceLineNo">070</span><a id="line.70">   * &lt;p&gt;This method just proxies to that object (which can be acquired via {@link #serializer()}). If any error occurs</a>
<span class="sourceLineNo">071</span><a id="line.71">   * while serializing, {@link ModelDeflateException} is thrown.&lt;/p&gt;</a>
<span class="sourceLineNo">072</span><a id="line.72">   *</a>
<span class="sourceLineNo">073</span><a id="line.73">   * @param instance Input model to serialize.</a>
<span class="sourceLineNo">074</span><a id="line.74">   * @return Serialized output data or object.</a>
<span class="sourceLineNo">075</span><a id="line.75">   * @throws ModelDeflateException If some error occurs while serializing the model.</a>
<span class="sourceLineNo">076</span><a id="line.76">   * @throws IOException If some IO error occurs.</a>
<span class="sourceLineNo">077</span><a id="line.77">   */</a>
<span class="sourceLineNo">078</span><a id="line.78">  default @Nonnull WriteIntermediate serialize(Model instance) throws ModelDeflateException, IOException {</a>
<span class="sourceLineNo">079</span><a id="line.79">    return serializer().deflate(instance);</a>
<span class="sourceLineNo">080</span><a id="line.80">  }</a>
<span class="sourceLineNo">081</span><a id="line.81"></a>
<span class="sourceLineNo">082</span><a id="line.82">  /**</a>
<span class="sourceLineNo">083</span><a id="line.83">   * Sugar shortcut to de-serialize a model through the current codec's installed {@link ModelDeserializer}.</a>
<span class="sourceLineNo">084</span><a id="line.84">   *</a>
<span class="sourceLineNo">085</span><a id="line.85">   * &lt;p&gt;This method just proxies to that object (which can be acquired via {@link #deserializer()}). If any error occurs</a>
<span class="sourceLineNo">086</span><a id="line.86">   * while de-serializing, {@link ModelInflateException} is thrown.&lt;/p&gt;</a>
<span class="sourceLineNo">087</span><a id="line.87">   *</a>
<span class="sourceLineNo">088</span><a id="line.88">   * @param input Input data to de-serialize into a model instance.</a>
<span class="sourceLineNo">089</span><a id="line.89">   * @return Model instance, deserialized from the input data.</a>
<span class="sourceLineNo">090</span><a id="line.90">   * @throws ModelInflateException If some error occurs while de-serializing the model.</a>
<span class="sourceLineNo">091</span><a id="line.91">   * @throws IOException If some IO error occurs.</a>
<span class="sourceLineNo">092</span><a id="line.92">   */</a>
<span class="sourceLineNo">093</span><a id="line.93">  default @Nonnull Model deserialize(ReadIntermediate input) throws ModelInflateException, IOException {</a>
<span class="sourceLineNo">094</span><a id="line.94">    return deserializer().inflate(input);</a>
<span class="sourceLineNo">095</span><a id="line.95">  }</a>
<span class="sourceLineNo">096</span><a id="line.96">}</a>




























































</pre>
</div>
</main>
</body>
</html>
