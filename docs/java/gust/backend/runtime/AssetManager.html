<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>AssetManager</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF8">
<meta name="keywords" content="gust.backend.runtime.AssetManager class">
<meta name="keywords" content="load()">
<meta name="keywords" content="acquire()">
<meta name="keywords" content="assetDataByToken()">
<meta name="keywords" content="assetMetadataByModule()">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
<script type="text/javascript" src="../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../jquery/jquery-3.5.1.js"></script>
<script type="text/javascript" src="../../../jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="AssetManager";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":9,"i1":10,"i2":10,"i3":9};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/AssetManager.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">gust.backend.runtime</a></div>
<h2 title="Class AssetManager" class="title">Class AssetManager</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>gust.backend.runtime.AssetManager</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<pre>@Context
@ThreadSafe
@Infrastructure
public final class <a href="../../../src-html/gust/backend/runtime/AssetManager.html#line.61">AssetManager</a>
extends java.lang.Object</pre>
<div class="block">Manager class, which mediates interactions with the binary asset bundle. When managed assets are active, the content
 and manifest are located in a binary proto file at the root of the JAR.

 <p>This object acts as a singleton, and is responsible for the actual mechanics of initially reading the asset bundle
 and interpreting its contents. Once we have established indexes and completed other prep work, the manager moves into
 a read-only mode, where its primary job shifts to satisfying dynamic asset requests - either for referential metadata
 which is used to embed an asset in the DOM, or content data, which is used to serve the asset itself.</p>

 <p>Multiple "variants" of an asset are stored in the bundle (if so configured). This includes one variant reflecting
 the regular, un-modified content for the asset, and an additional variant for each caching strategy supported by the
 framework (<code>GZIP</code> and <code>BROTLI</code> at the time of this writing).</p></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Class</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="AssetManager.ManagedAsset.html" title="class in gust.backend.runtime">AssetManager.ManagedAsset</a>&lt;<a href="AssetManager.ManagedAsset.html" title="type parameter in AssetManager.ManagedAsset">M</a> extends com.google.protobuf.Message&gt;</span></code></th>
<td class="colLast">
<div class="block">Public API surface for interacting with raw asset metadata.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="AssetManager.ManagedAssetContent.html" title="class in gust.backend.runtime">AssetManager.ManagedAssetContent</a></span></code></th>
<td class="colLast">
<div class="block">Public API surface for interacting with raw asset content.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="AssetManager.ModuleType.html" title="enum in gust.backend.runtime">AssetManager.ModuleType</a></span></code></th>
<td class="colLast">
<div class="block">Enumerates types of asset modules.</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>static <a href="AssetManager.html" title="class in gust.backend.runtime">AssetManager</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#acquire()">acquire</a></span>()</code></th>
<td class="colLast">
<div class="block">Acquire a new instance of the asset manager.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>java.util.Optional&lt;<a href="AssetManager.ManagedAssetContent.html" title="class in gust.backend.runtime">AssetManager.ManagedAssetContent</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#assetDataByToken(java.lang.String)">assetDataByToken</a></span>&#8203;(java.lang.String&nbsp;token)</code></th>
<td class="colLast">
<div class="block">Resolve raw asset content by its opaque token.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>&lt;M extends com.google.protobuf.Message&gt;<br>java.util.Optional&lt;<a href="AssetManager.ManagedAsset.html" title="class in gust.backend.runtime">AssetManager.ManagedAsset</a>&lt;M&gt;&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#assetMetadataByModule(java.lang.String)">assetMetadataByModule</a></span>&#8203;(java.lang.String&nbsp;module)</code></th>
<td class="colLast">
<div class="block">Resolve asset metadata by its module name.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>static void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#load()">load</a></span>()</code></th>
<td class="colLast">
<div class="block">Attempt to force-load the asset manifest, in a static context, preparing our indexed read-only data regarding the
 data it contains.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="load()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>load</h4>
<pre class="methodSignature">public static&nbsp;void&nbsp;<a href="../../../src-html/gust/backend/runtime/AssetManager.html#line.468">load</a>()
                 throws java.io.IOException,
                        com.google.protobuf.InvalidProtocolBufferException</pre>
<div class="block">Attempt to force-load the asset manifest, in a static context, preparing our indexed read-only data regarding the
 data it contains. If we can't load the file, surface an exception so the invoking code can decide what to do.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - If some otherwise unmentioned I/O error occurs.</dd>
<dd><code>java.io.FileNotFoundException</code> - If the asset manifest could not be found.</dd>
<dd><code>com.google.protobuf.InvalidProtocolBufferException</code> - If the enclosed Protocol Buffer data isn't recognizable.</dd>
</dl>
</li>
</ul>
<a id="acquire()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>acquire</h4>
<pre class="methodSignature">public static&nbsp;<a href="AssetManager.html" title="class in gust.backend.runtime">AssetManager</a>&nbsp;<a href="../../../src-html/gust/backend/runtime/AssetManager.html#line.507">acquire</a>()
                            throws java.io.IOException</pre>
<div class="block">Acquire a new instance of the asset manager. The instance provided by this method is not guaranteed to be fresh for
 every invocation (it may be a shared object), but all operations on the asset manager are threadsafe nonetheless.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Asset manager instance.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a id="assetDataByToken(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>assetDataByToken</h4>
<pre class="methodSignature">@Nonnull
public&nbsp;java.util.Optional&lt;<a href="AssetManager.ManagedAssetContent.html" title="class in gust.backend.runtime">AssetManager.ManagedAssetContent</a>&gt;&nbsp;<a href="../../../src-html/gust/backend/runtime/AssetManager.html#line.528">assetDataByToken</a>&#8203;(@Nonnull
                                                                             java.lang.String&nbsp;token)</pre>
<div class="block">Resolve raw asset content by its opaque token. This will hand back an object containing representations of the
 asset for each enabled compression mode.

 <p>The object also knows how to resolve the most-optimal representation, based on the accepted compression modes
 indicated by the invoking client.</p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>token</code> - Token uniquely identifying this asset (generated from the module name and content fingerprint).</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Optional, either <code>Optional.empty()</code> if the asset could not be found, or wrapping the result.</dd>
</dl>
</li>
</ul>
<a id="assetMetadataByModule(java.lang.String)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>assetMetadataByModule</h4>
<pre class="methodSignature">@Nonnull
public&nbsp;&lt;M extends com.google.protobuf.Message&gt;&nbsp;java.util.Optional&lt;<a href="AssetManager.ManagedAsset.html" title="class in gust.backend.runtime">AssetManager.ManagedAsset</a>&lt;M&gt;&gt;&nbsp;<a href="../../../src-html/gust/backend/runtime/AssetManager.html#line.551">assetMetadataByModule</a>&#8203;(@Nonnull
                                                                                                                      java.lang.String&nbsp;module)</pre>
<div class="block">Resolve asset metadata by its module name. This will hand back an object specifying the type/name of the module,
 and links to each of the content blocks that constitute it.

 <p>This code path is generally used for resolving metadata for an asset so it can be <i>referenced</i>. The serving
 for URL generated for the asset refers to a specific content block with an opaque token, rather than the module
 name, which refers to a bundle of assets or content.</p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>module</code> - Module name for which we should resolve asset metadata.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Optional, either <code>Optional.empty()</code> if the asset group could not be found, or wrapping the result.</dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/AssetManager.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small>Copyright (©) 2020, The Gust Framework Authors</small></p>
</footer>
</body>
</html>
