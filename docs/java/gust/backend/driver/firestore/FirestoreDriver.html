<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>FirestoreDriver</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF8">
<meta name="keywords" content="gust.backend.driver.firestore.FirestoreDriver class">
<meta name="keywords" content="executorService()">
<meta name="keywords" content="codec()">
<meta name="keywords" content="generateKey()">
<meta name="keywords" content="retrieve()">
<meta name="keywords" content="persist()">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../jquery/jquery-3.3.1.js"></script>
<script type="text/javascript" src="../../../../jquery/jquery-migrate-3.0.1.js"></script>
<script type="text/javascript" src="../../../../jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="FirestoreDriver";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/FirestoreDriver.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">gust.backend.driver.firestore</a></div>
<h2 title="Class FirestoreDriver" class="title">Class FirestoreDriver&lt;Key extends com.google.protobuf.Message,&#8203;Model extends com.google.protobuf.Message&gt;</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>gust.backend.driver.firestore.FirestoreDriver&lt;Key,&#8203;Model&gt;</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="../../model/DatabaseDriver.html" title="interface in gust.backend.model">DatabaseDriver</a>&lt;Key,&#8203;Model,&#8203;<a href="../../model/CollapsedMessage.html" title="class in gust.backend.model">CollapsedMessage</a>&gt;</code>, <code><a href="../../model/PersistenceDriver.html" title="interface in gust.backend.model">PersistenceDriver</a>&lt;Key,&#8203;Model,&#8203;<a href="../../model/CollapsedMessage.html" title="class in gust.backend.model">CollapsedMessage</a>&gt;</code></dd>
</dl>
<hr>
<pre>@Immutable
@ThreadSafe
public final class <a href="../../../../src-html/gust/backend/driver/firestore/FirestoreDriver.html#line.48">FirestoreDriver</a>&lt;Key extends com.google.protobuf.Message,&#8203;Model extends com.google.protobuf.Message&gt;
extends java.lang.Object
implements <a href="../../model/DatabaseDriver.html" title="interface in gust.backend.model">DatabaseDriver</a>&lt;Key,&#8203;Model,&#8203;<a href="../../model/CollapsedMessage.html" title="class in gust.backend.model">CollapsedMessage</a>&gt;</pre>
<div class="block">Defines a built-in framework <a href="../../model/DatabaseDriver.html" title="interface in gust.backend.model"><code>DatabaseDriver</code></a> for interacting seamlessly with Google Cloud Firestore. This
 enables Firestore-based persistence for any <code>Message</code>-derived (schema-driven) business model in a given Gust
 app's ecosystem.

 <p>Model storage can be deeply customized on a per-model basis, thanks to the built-in proto annotations available
 in <code>gust.core</code>. The Firestore adapter supports basic persistence (i.e. as a regular
 <pre>PersistenceDriver</pre>), but also supports generic, object index-style queries.</p>

 <p><b>Caching</b> may be facilitated by any compliant cache driver, via the main Firestore adapter.</p></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="FirestoreAdapter.html" title="class in gust.backend.driver.firestore"><code>main adapter interface for Firestore.</code></a>, 
<a href="FirestoreManager.html" title="class in gust.backend.driver.firestore"><code>logic and connection manager for Firestore.</code></a>, 
<a href="FirestoreTransportConfig.html" title="class in gust.backend.driver.firestore"><code>configuration class for Firestore access.</code></a></dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<ul class="blockList">
<li class="blockList"><a id="nested.classes.inherited.from.class.gust.backend.model.PersistenceDriver">
<!--   -->
</a>
<h3>Nested classes/interfaces inherited from interface&nbsp;gust.backend.model.<a href="../../model/PersistenceDriver.html" title="interface in gust.backend.model">PersistenceDriver</a></h3>
<code><a href="../../model/PersistenceDriver.Internals.html" title="class in gust.backend.model">PersistenceDriver.Internals</a></code></li>
</ul>
</li>
</ul>
</section>
<!-- =========== FIELD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<ul class="blockList">
<li class="blockList"><a id="fields.inherited.from.class.gust.backend.model.PersistenceDriver">
<!--   -->
</a>
<h3>Fields inherited from interface&nbsp;gust.backend.model.<a href="../../model/PersistenceDriver.html" title="interface in gust.backend.model">PersistenceDriver</a></h3>
<code><a href="../../model/PersistenceDriver.html#DEFAULT_CACHE_TIMEOUT">DEFAULT_CACHE_TIMEOUT</a>, <a href="../../model/PersistenceDriver.html#DEFAULT_CACHE_TIMEOUT_UNIT">DEFAULT_CACHE_TIMEOUT_UNIT</a>, <a href="../../model/PersistenceDriver.html#DEFAULT_TIMEOUT">DEFAULT_TIMEOUT</a>, <a href="../../model/PersistenceDriver.html#DEFAULT_TIMEOUT_UNIT">DEFAULT_TIMEOUT_UNIT</a></code></li>
</ul>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<div class="memberSummary">
<div role="tablist" aria-orientation="horizontal"><button role="tab" aria-selected="true" aria-controls="memberSummary_tabpanel" tabindex="0" onkeydown="switchTab(event)" id="t0" class="activeTableTab">All Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t2" class="tableTab" onclick="show(2);">Instance Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t4" class="tableTab" onclick="show(8);">Concrete Methods</button></div>
<div id="memberSummary_tabpanel" role="tabpanel">
<table aria-labelledby="t0">
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor" id="i0">
<td class="colFirst"><code><a href="../../model/ModelCodec.html" title="interface in gust.backend.model">ModelCodec</a>&lt;<a href="FirestoreDriver.html" title="type parameter in FirestoreDriver">Model</a>,&#8203;<a href="../../model/CollapsedMessage.html" title="class in gust.backend.model">CollapsedMessage</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#codec()">codec</a></span>()</code></th>
<td class="colLast">
<div class="block">Acquire an instance of the codec used by this adapter.</div>
</td>
</tr>
<tr class="rowColor" id="i1">
<td class="colFirst"><code>com.google.common.util.concurrent.ListeningScheduledExecutorService</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#executorService()">executorService</a></span>()</code></th>
<td class="colLast">
<div class="block">Resolve an executor service for use with this persistence driver.</div>
</td>
</tr>
<tr class="altColor" id="i2">
<td class="colFirst"><code><a href="FirestoreDriver.html" title="type parameter in FirestoreDriver">Key</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#generateKey(com.google.protobuf.Message)">generateKey</a></span>&#8203;(com.google.protobuf.Message&nbsp;instance)</code></th>
<td class="colLast">
<div class="block">Generate a key for a new entity, which must be stored by this driver, but does not yet have a key.</div>
</td>
</tr>
<tr class="rowColor" id="i3">
<td class="colFirst"><code><a href="../../runtime/ReactiveFuture.html" title="class in gust.backend.runtime">ReactiveFuture</a>&lt;<a href="FirestoreDriver.html" title="type parameter in FirestoreDriver">Model</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#persist(Key,Model,gust.backend.model.WriteOptions)">persist</a></span>&#8203;(<a href="FirestoreDriver.html" title="type parameter in FirestoreDriver">Key</a>&nbsp;documentReference,
       <a href="FirestoreDriver.html" title="type parameter in FirestoreDriver">Model</a>&nbsp;model,
       <a href="../../model/WriteOptions.html" title="interface in gust.backend.model">WriteOptions</a>&nbsp;options)</code></th>
<td class="colLast">
<div class="block">Low-level record persistence method.</div>
</td>
</tr>
<tr class="altColor" id="i4">
<td class="colFirst"><code><a href="../../runtime/ReactiveFuture.html" title="class in gust.backend.runtime">ReactiveFuture</a>&lt;java.util.Optional&lt;<a href="FirestoreDriver.html" title="type parameter in FirestoreDriver">Model</a>&gt;&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#retrieve(Key,gust.backend.model.FetchOptions)">retrieve</a></span>&#8203;(<a href="FirestoreDriver.html" title="type parameter in FirestoreDriver">Key</a>&nbsp;key,
        <a href="../../model/FetchOptions.html" title="interface in gust.backend.model">FetchOptions</a>&nbsp;opts)</code></th>
<td class="colLast">
<div class="block">Low-level record retrieval method.</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.gust.backend.model.PersistenceDriver">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;gust.backend.model.<a href="../../model/PersistenceDriver.html" title="interface in gust.backend.model">PersistenceDriver</a></h3>
<code><a href="../../model/PersistenceDriver.html#applyFieldsRecursive(com.google.protobuf.Message.Builder,com.google.protobuf.Message,java.util.Set,gust.backend.model.FetchOptions.MaskMode,java.lang.String)">applyFieldsRecursive</a>, <a href="../../model/PersistenceDriver.html#applyMask(Model,gust.backend.model.FetchOptions)">applyMask</a>, <a href="../../model/PersistenceDriver.html#fetch(Key)">fetch</a>, <a href="../../model/PersistenceDriver.html#fetch(Key,gust.backend.model.FetchOptions)">fetch</a>, <a href="../../model/PersistenceDriver.html#fetchAsync(Key)">fetchAsync</a>, <a href="../../model/PersistenceDriver.html#fetchAsync(Key,gust.backend.model.FetchOptions)">fetchAsync</a>, <a href="../../model/PersistenceDriver.html#fetchReactive(Key)">fetchReactive</a>, <a href="../../model/PersistenceDriver.html#fetchReactive(Key,gust.backend.model.FetchOptions)">fetchReactive</a>, <a href="../../model/PersistenceDriver.html#fetchSafe(Key)">fetchSafe</a>, <a href="../../model/PersistenceDriver.html#fetchSafe(Key,gust.backend.model.FetchOptions)">fetchSafe</a>, <a href="../../model/PersistenceDriver.html#generateId(com.google.protobuf.Message)">generateId</a></code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="executorService()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>executorService</h4>
<pre class="methodSignature">@Nonnull
public&nbsp;com.google.common.util.concurrent.ListeningScheduledExecutorService&nbsp;<a href="../../../../src-html/gust/backend/driver/firestore/FirestoreDriver.html#line.135">executorService</a>()</pre>
<div class="block">Resolve an executor service for use with this persistence driver. Operations will be executed against this as they
 are received.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../model/PersistenceDriver.html#executorService()">executorService</a></code>&nbsp;in interface&nbsp;<code><a href="../../model/PersistenceDriver.html" title="interface in gust.backend.model">PersistenceDriver</a>&lt;<a href="FirestoreDriver.html" title="type parameter in FirestoreDriver">Key</a> extends com.google.protobuf.Message,&#8203;<a href="FirestoreDriver.html" title="type parameter in FirestoreDriver">Model</a> extends com.google.protobuf.Message,&#8203;<a href="../../model/CollapsedMessage.html" title="class in gust.backend.model">CollapsedMessage</a>&gt;</code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Scheduled executor service.</dd>
</dl>
</li>
</ul>
<a id="codec()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>codec</h4>
<pre class="methodSignature">@Nonnull
public&nbsp;<a href="../../model/ModelCodec.html" title="interface in gust.backend.model">ModelCodec</a>&lt;<a href="FirestoreDriver.html" title="type parameter in FirestoreDriver">Model</a>,&#8203;<a href="../../model/CollapsedMessage.html" title="class in gust.backend.model">CollapsedMessage</a>&gt;&nbsp;<a href="../../../../src-html/gust/backend/driver/firestore/FirestoreDriver.html#line.141">codec</a>()</pre>
<div class="block">Acquire an instance of the codec used by this adapter. Codecs are either injected/otherwise provided during adapter
 construction, or they are specified statically if the adapter depends on a specific codec.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../model/PersistenceDriver.html#codec()">codec</a></code>&nbsp;in interface&nbsp;<code><a href="../../model/PersistenceDriver.html" title="interface in gust.backend.model">PersistenceDriver</a>&lt;<a href="FirestoreDriver.html" title="type parameter in FirestoreDriver">Key</a> extends com.google.protobuf.Message,&#8203;<a href="FirestoreDriver.html" title="type parameter in FirestoreDriver">Model</a> extends com.google.protobuf.Message,&#8203;<a href="../../model/CollapsedMessage.html" title="class in gust.backend.model">CollapsedMessage</a>&gt;</code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Model codec currently in use by this adapter.</dd>
</dl>
</li>
</ul>
<a id="generateKey(com.google.protobuf.Message)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>generateKey</h4>
<pre class="methodSignature">@Nonnull
public&nbsp;<a href="FirestoreDriver.html" title="type parameter in FirestoreDriver">Key</a>&nbsp;<a href="../../../../src-html/gust/backend/driver/firestore/FirestoreDriver.html#line.149">generateKey</a>&#8203;(@Nonnull
                       com.google.protobuf.Message&nbsp;instance)</pre>
<div class="block">Generate a key for a new entity, which must be stored by this driver, but does not yet have a key. If the driver
 does not support key generation, <code>UnsupportedOperationException</code> is thrown.

 <p>Generated keys are expected to be best-effort unique. Generally, Java's built-in <code>UUID</code> should
 do the trick just fine. In more complex or scalable circumstances, this method can be overridden to reach out to
 the data engine to generate a key.</p></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../model/PersistenceDriver.html#generateKey(com.google.protobuf.Message)">generateKey</a></code>&nbsp;in interface&nbsp;<code><a href="../../model/PersistenceDriver.html" title="interface in gust.backend.model">PersistenceDriver</a>&lt;<a href="FirestoreDriver.html" title="type parameter in FirestoreDriver">Key</a> extends com.google.protobuf.Message,&#8203;<a href="FirestoreDriver.html" title="type parameter in FirestoreDriver">Model</a> extends com.google.protobuf.Message,&#8203;<a href="../../model/CollapsedMessage.html" title="class in gust.backend.model">CollapsedMessage</a>&gt;</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>instance</code> - Default instance of the model type for which a key is desired.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Generated key for an entity to be stored.</dd>
</dl>
</li>
</ul>
<a id="retrieve(com.google.protobuf.Message,gust.backend.model.FetchOptions)">
<!--   -->
</a><a id="retrieve(Key,gust.backend.model.FetchOptions)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>retrieve</h4>
<pre class="methodSignature">@Nonnull
public&nbsp;<a href="../../runtime/ReactiveFuture.html" title="class in gust.backend.runtime">ReactiveFuture</a>&lt;java.util.Optional&lt;<a href="FirestoreDriver.html" title="type parameter in FirestoreDriver">Model</a>&gt;&gt;&nbsp;<a href="../../../../src-html/gust/backend/driver/firestore/FirestoreDriver.html#line.156">retrieve</a>&#8203;(@Nonnull
                                                          <a href="FirestoreDriver.html" title="type parameter in FirestoreDriver">Key</a>&nbsp;key,
                                                          @Nonnull
                                                          <a href="../../model/FetchOptions.html" title="interface in gust.backend.model">FetchOptions</a>&nbsp;opts)</pre>
<div class="block">Low-level record retrieval method. Effectively called by all other fetch variants. Asynchronously retrieve a data
 model instance from storage, which will populate the provided <a href="../../runtime/ReactiveFuture.html" title="class in gust.backend.runtime"><code>ReactiveFuture</code></a> value.

 <p>All futures emitted via the persistence framework (and Gust writ-large) are <code>ListenableFuture</code>-compliant
 implementations under the hood. If the requested record cannot be located, <code>Optional.empty()</code> is returned as
 the future value, otherwise, the model is returned.</p>

 <p>This method additionally enables specification of custom <a href="../../model/FetchOptions.html" title="interface in gust.backend.model"><code>FetchOptions</code></a>, which are applied on a per-
 operation basis to override global defaults.</p>

 <p><b>Exceptions:</b> Instead of throwing a <a href="../../model/PersistenceException.html" title="class in gust.backend.model"><code>PersistenceException</code></a> as other methods do, this operation will
 <i>emit</i> the exception over the <code>Future</code> channel instead, or raise the exception in the event
 <code>Future.get()</code> is called to surface it in the invoking (or dependent) code.</p></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../model/PersistenceDriver.html#retrieve(Key,gust.backend.model.FetchOptions)">retrieve</a></code>&nbsp;in interface&nbsp;<code><a href="../../model/PersistenceDriver.html" title="interface in gust.backend.model">PersistenceDriver</a>&lt;<a href="FirestoreDriver.html" title="type parameter in FirestoreDriver">Key</a> extends com.google.protobuf.Message,&#8203;<a href="FirestoreDriver.html" title="type parameter in FirestoreDriver">Model</a> extends com.google.protobuf.Message,&#8203;<a href="../../model/CollapsedMessage.html" title="class in gust.backend.model">CollapsedMessage</a>&gt;</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>key</code> - Key at which we should look for the requested entity, and emit it if found.</dd>
<dd><code>opts</code> - Options to apply to this individual retrieval operation.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Future value, which resolves to the specified datamodel instance, or <code>Optional.empty()</code> if the record
         could not be located by the storage engine.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../model/PersistenceDriver.html#fetch(Key)"><code>For a simple, synchronous (=unsafe) version of this method.</code></a>, 
<a href="../../model/PersistenceDriver.html#fetchSafe(Key)"><code>For a simple, synchronous (-safe) version of this method.</code></a>, 
<a href="../../model/PersistenceDriver.html#fetchAsync(Key)"><code>For an async variant of this method (identical, except options are optional).</code></a>, 
<a href="../../model/PersistenceDriver.html#fetchReactive(Key)"><code>For a reactive version of this method, which returns a .</code></a></dd>
</dl>
</li>
</ul>
<a id="persist(com.google.protobuf.Message,com.google.protobuf.Message,gust.backend.model.WriteOptions)">
<!--   -->
</a><a id="persist(Key,Model,gust.backend.model.WriteOptions)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>persist</h4>
<pre class="methodSignature">@Nonnull
public&nbsp;<a href="../../runtime/ReactiveFuture.html" title="class in gust.backend.runtime">ReactiveFuture</a>&lt;<a href="FirestoreDriver.html" title="type parameter in FirestoreDriver">Model</a>&gt;&nbsp;<a href="../../../../src-html/gust/backend/driver/firestore/FirestoreDriver.html#line.180">persist</a>&#8203;(@Nonnull
                                     <a href="FirestoreDriver.html" title="type parameter in FirestoreDriver">Key</a>&nbsp;documentReference,
                                     @Nonnull
                                     <a href="FirestoreDriver.html" title="type parameter in FirestoreDriver">Model</a>&nbsp;model,
                                     @Nonnull
                                     <a href="../../model/WriteOptions.html" title="interface in gust.backend.model">WriteOptions</a>&nbsp;options)</pre>
<div class="block">Low-level record persistence method. Effectively called by all other create/put variants. Asynchronously write a
 data model instance to storage, which will populate the provided <a href="../../runtime/ReactiveFuture.html" title="class in gust.backend.runtime"><code>ReactiveFuture</code></a> value.

 <p>Optionally, a key may be provided as a nominated value to the storage engine. Whether the engine accepts
 nominated keys is up to the implementation. In all cases, the engine must return the key used to store and address
 the value henceforth.</p>

 <p>All futures emitted via the persistence framework (and Gust writ-large) are <code>ListenableFuture</code>-compliant
 implementations under the hood, but <a href="../../runtime/ReactiveFuture.html" title="class in gust.backend.runtime"><code>ReactiveFuture</code></a> allows a model-layer result to be used as a
 <code>Future</code>, or a one-item reactive <code>Publisher</code>.</p>

 <p>This method additionally enables specification of custom <a href="../../model/WriteOptions.html" title="interface in gust.backend.model"><code>WriteOptions</code></a>, which are applied on a per-
 operation basis to override global defaults.</p>

 <p><b>Exceptions:</b> Instead of throwing a <a href="../../model/PersistenceException.html" title="class in gust.backend.model"><code>PersistenceException</code></a> as other methods do, this operation will
 <i>emit</i> the exception over the <code>Future</code> channel instead, or raise the exception in the event
 <code>Future.get()</code> is called to surface it in the invoking (or dependent) code.</p></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../model/PersistenceDriver.html#persist(Key,Model,gust.backend.model.WriteOptions)">persist</a></code>&nbsp;in interface&nbsp;<code><a href="../../model/PersistenceDriver.html" title="interface in gust.backend.model">PersistenceDriver</a>&lt;<a href="FirestoreDriver.html" title="type parameter in FirestoreDriver">Key</a> extends com.google.protobuf.Message,&#8203;<a href="FirestoreDriver.html" title="type parameter in FirestoreDriver">Model</a> extends com.google.protobuf.Message,&#8203;<a href="../../model/CollapsedMessage.html" title="class in gust.backend.model">CollapsedMessage</a>&gt;</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>documentReference</code> - Key nominated by invoking code for storing this record. If no key is provided, the underlying storage
            engine is expected to allocate one. Where unsupported, <a href="../../model/PersistenceException.html" title="class in gust.backend.model"><code>PersistenceException</code></a> will be thrown.</dd>
<dd><code>model</code> - Model to store at the specified key, if provided.</dd>
<dd><code>options</code> - Options to apply to this persist operation.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Reactive future, which resolves to the key where the provided model is now stored. In no case should this
         method return <code>null</code>. Instead, <a href="../../model/PersistenceException.html" title="class in gust.backend.model"><code>PersistenceException</code></a> will be thrown.</dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/FirestoreDriver.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small>Copyright (©) 2020, The Gust Framework Authors</small></p>
</footer>
</body>
</html>
